# üìñ Quran-ILM (Intelligent Learning Module)

**Quran-ILM** is an advanced AI-powered RAG (Retrieval-Augmented Generation) application designed to provide accurate, context-aware answers to Islamic and Quranic queries. Built with **Streamlit**, **MongoDB Atlas**, and **Google Gemini**, it combines modern vector search with generative AI to facilitate religious research and learning.

---

## üöÄ Features

### ü§ñ AI Chatbot
-   **RAG-Powered**: Retrieves context from verified sources (Tafsir, Hadith, Quran translations) before answering.
-   **Source Citations**: Displays the specific Reference Texts used to generate the answer for transparency.
-   **Contextual History**: Remembers previous turns in the conversation.
-   **Token Usage Tracking**: Monitors cost and efficiency per query.

### üõ°Ô∏è Secure Authentication
-   **Role-Based Access Control (RBAC)**: Distinct views for **Users** (Chatbot) and **Admins** (Dashboard).
-   **Security**: SHA-256 (salted) password hashing, OTP-based verification (Sign Up, Forgot Password), and Admin 2FA.
-   **Session Management**: Secure session handling with auto-logout.

### üõ†Ô∏è Admin Dashboard
-   **File Manager**: Upload PDF/TXT files directly to **GridFS** and sync with the RAG knowledge base.
-   **RAG Configuration**: Dynamically adjust LLM parameters (`Top-K`, `Temperature`, `Chunk Size`) and API keys without restarting the server.
-   **Analytics**: Visualize Token Usage, User Traffic, and Database states.
-   **Feedback Review**: Monitor user feedback (Thumbs Up/Down + Comments) to improve response quality.

---

## üíª Tech Stack

-   **Frontend**: Streamlit (Python)
-   **Database**: MongoDB Atlas (Metadata, Chat History, Logs) & MongoDB Vector Search.
-   **Storage**: MongoDB GridFS (Raw PDF/Text storage).
-   **AI Model**: Google Gemini 1.5 Flash (via `google-generativeai`).
-   **Embeddings**: Google `text-embedding-004`.
-   **Email**: SMTP (Gmail) for OTPs and Notifications.

---

## ‚öôÔ∏è Installation & Setup

### 1. Clone the Repository
```bash
git clone https://github.com/whis-19/Quran-ILM.git
cd Quran-ILM
```

### 2. Install Dependencies
```bash
pip install -r requirements.txt
```

### 3. Configure Environment
Create a `.env` file in the root directory (or use Streamlit Secrets). Copy the structure below:

```ini
# --- Database ---
MONGO_URI=mongodb+srv://<user>:<password>@cluster.mongodb.net/
MONGO_DB_NAME=Quran_Metadata
MONGO_RAG_URI=mongodb+srv://<user>:<password>@cluster.mongodb.net/
MONGO_RAG_DB_NAME=Quran_RAG_Vectors

# --- AI ---
GOOGLE_API_KEY=your_google_gemini_api_key

# --- Email (SMTP) ---
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_EMAIL=your_email@gmail.com
SMTP_PASSWORD=your_app_password
```

### 4. Run the Application
```bash
streamlit run Home.py
```

---

## üìÇ Project Structure

-   **`Home.py`**: Main entry point & Router.
-   **`config.py`**: Centralized configuration and environment loader.
-   **`views/`**: UI Pages (Login, Chatbot, Admin Panels).
-   **`auth_utils.py`**: Authentication logic (Hash, OTP, Email).
-   **`rag_ingestion.py`**: Pipeline for indexing documents into Vector Store.
-   **`chatbot.py`**: Core RAG logic (Retrieve -> Generate).

---

## ‚ö†Ô∏è Important Disclaimer

**This system is for Educational and Research Purposes ONLY.**

-   The content generated by this AI **DOES NOT constitute a valid Islamic Fatwa (Religious Ruling)**.
-   It is an AI tool and may occasionally generate incorrect or biased information.
-   Users are strictly advised to **consult qualified religious scholars** for specific rulings or matters of Halal/Haram.
-   The developers bear no responsibility for misuse or misinterpretation of the generated content.

---

*Verified Sources Only. Knowledge with Responsibility.*
